# 变量

* [返回上层目录](../shell.md)





# 条件变量替换

Bash Shell可以进行变量的条件替换，既只有某种条件发生时才进行替换，替换 
条件放在{}中。

* `${value:-word} `

  **当变量未定义或者值为空时,返回值为word的内容,否则返回变量的值**

* `${value:=word} `

  与前者类似,只是若变量未定义或者值为空时,在返回word的值的同时将 

  word赋值给value 

* `${value:?message} `

  若变量以赋值的话,正常替换.否则将消息message送到标准错误输出（若 

  此替换出现在Shell程序中,那么该程序将终止运行）

* `${value:+word} `

  若变量以赋值的话,其值才用word替换,否则不进行任何替换

* `${value:offset} `

  `${value:offset:length} `

  从变量中提取子串,这里offset和length可以是算术表达式

* `${#value} `

  变量的字符个数 

* `${value#pattern} `   `${value##pattern} `

  去掉value中与pattern相匹配的部分,条件是value的开头与pattern相匹配 

  `#`与`##`的区别在于一个是最短匹配模式,一个是最长匹配模式。

* `${value%pattern}`     `${value%%pattern} `

  和`${value#pattern} `类似,只是是从value的尾部于pattern相匹配，`%`与`%%`的区别与`#`与`##`一样

* `${value/pattern/string}`    `${value//pattern/string} `

  进行变量内容的替换,把与pattern匹配的部分替换为string的内容,`/`与`//`的区别与上同 

注意: 上述条件变量替换中,除`${value:=word} `外,其余均不影响变量本身的值 



# date系统时间

date是Linux系统里自带的一个系统命令，用来显示当前的系统时间，不过默认显示的结果里包括很多信息，特别是做为文件名输出时，不是很方便

好在date命令里包含格式化输出的选项

```
[root@root ~]# date "+%Y-%m-%d"
2013-02-19
[root@root ~]# date "+%H:%M:%S"
13:13:59
[root@root ~]# date "+%Y-%m-%d %H:%M:%S"
2013-02-19 13:14:19
[root@root ~]# date "+%Y_%m_%d %H:%M:%S"  
2013_02_19 13:14:58
# -d,--date=字符串 显示指定字符串所描述的时间，而非当前时间
[root@root ~]# date -d today 
Tue Feb 19 13:10:38 CST 2013
[root@root ~]# date -d now
Tue Feb 19 13:10:43 CST 2013
[root@root ~]# date -d tomorrow
Wed Feb 20 13:11:06 CST 2013
[root@root ~]# date -d yesterday
```

给定的格式FORMAT 控制着输出，解释序列如下：

```js
%%    一个文字的 %
%a    当前locale 的星期名缩写(例如： 日，代表星期日)
%A    当前locale 的星期名全称 (如：星期日)
%b    当前locale 的月名缩写 (如：一，代表一月)
%B    当前locale 的月名全称 (如：一月)
%c    当前locale 的日期和时间 (如：2005年3月3日 星期四 23:05:25)
%C    世纪；比如 %Y，通常为省略当前年份的后两位数字(例如：20)
%d    按月计的日期(例如：01)
%D    按月计的日期；等于%m/%d/%y
%e    按月计的日期，添加空格，等于%_d
%F    完整日期格式，等价于 %Y-%m-%d
%g    ISO-8601 格式年份的最后两位 (参见%G)
%G    ISO-8601 格式年份 (参见%V)，一般只和 %V 结合使用
%h    等于%b
%H    小时(00-23)
%I    小时(00-12)
%c    按年计的日期(001-366)
%k    时(0-23)
%l    时(1-12)
%m    月份(01-12)
%M    分(00-59)
%n    换行
%N    纳秒(000000000-999999999)
%p    当前locale 下的"上午"或者"下午"，未知时输出为空
%P    与%p 类似，但是输出小写字母
%r    当前locale 下的 12 小时时钟时间 (如：11:11:04 下午)
%R    24 小时时间的时和分，等价于 %H:%M
%s    自UTC 时间 1970-01-01 00:00:00 以来所经过的秒数
%S    秒(00-60)
%t    输出制表符 Tab
%T    时间，等于%H:%M:%S
%u    星期，1 代表星期一
%U    一年中的第几周，以周日为每星期第一天(00-53)
%V    ISO-8601 格式规范下的一年中第几周，以周一为每星期第一天(01-53)
%w    一星期中的第几日(0-6)，0 代表周一
%W    一年中的第几周，以周一为每星期第一天(00-53)
%x    当前locale 下的日期描述 (如：12/31/99)
%X    当前locale 下的时间描述 (如：23:13:48)
%y    年份最后两位数位 (00-99)
%Y    年份
%z +hhmm              数字时区(例如，-0400)
%:z +hh:mm            数字时区(例如，-04:00)
%::z +hh:mm:ss        数字时区(例如，-04:00:00)
%:::z                 数字时区带有必要的精度 (例如，-04，+05:30)
%Z                    按字母表排序的时区缩写 (例如，EDT)
```

默认情况下，日期的数字区域以0 填充。

以下可选标记可以跟在"%"后：

```shell
\- (连字符)不填充该域
_ (下划线)以空格填充
0 (数字0)以0 填充
^ 如果可能，使用大写字母
\# 如果可能，使用相反的大小写
```

在任何标记之后还允许一个可选的域宽度指定，它是一个十进制数字。作为一个可选的修饰声明，它可以是E，在可能的情况下使用本地环境关联的表示方式；或者是O，在可能的情况下使用本地环境关联的数字符号。

## 获取其他时间的日期

linux中用shell获取昨天、明天或多天前的日期:

```shell
DATE=$(date +%Y%m%d --date '2 days ago') #获取昨天或多天前的日期
date -d next-day +%Y%m%d #明天日期 
date -d last-day +%Y%m%d #昨天日期 
date -d tomorrow +%Y%m%d #明天日期 
date -d yesterday +%Y%m%d #昨天日期 
date -d last-month +%Y%m #上个月日期 
date -d next-month +%Y%m #下个月日期 
date -d next-year +%Y #明年日期 
```





# 参考资料

* [Linux下date命令，格式化输出，时间设置](https://blog.csdn.net/jk110333/article/details/8590746/)
* [bash中获取其他时间的日期](https://blog.51cto.com/liucb/1845201)

"date系统时间"参考此博客。

